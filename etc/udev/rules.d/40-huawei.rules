# usb_modeswitch script for Huawei / Brovi e7720-325
# credit: https://blog.tanatos.org/posts/huawei_e3372h-325_brovi_with_linux/
# alternative: https://www.draisberghof.de/usb_modeswitch/bb/viewtopic.php?f=3&t=3043

ACTION!="add", GOTO="modeswitch_rules_end"
SUBSYSTEM!="usb", GOTO="modeswitch_rules_end"
ATTRS{bInterfaceNumber}!="00", GOTO="modeswitch_rules_end"

LABEL="modeswitch_rules_begin"

# Huawei E3372-325
ATTR{idVendor}=="3566", ATTR{idProduct}=="2001", RUN+="/usr/local/bin/brovi_switch %k %p"

LABEL="modeswitch_rules_end"

# Network interface naming rules 
# Huawei/Brovi/Zowee E3372-325
SUBSYSTEM=="net", ACTION=="add", ATTRS{idVendor}=="3566", ATTRS{idProduct}=="2001", NAME="hua0"

# Huawei E3372-320 12d1:14db
SUBSYSTEM=="net", ACTION=="add", ATTRS{idVendor}=="12d1", ATTRS{idProduct}=="14db", NAME="hua0"

# Huawei E3372-153 12d1:14dc
SUBSYSTEM=="net", ACTION=="add", ATTRS{idVendor}=="12d1", ATTRS{idProduct}=="14dc", NAME="hua0"
